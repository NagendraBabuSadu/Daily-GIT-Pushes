<!DOCTYPE html>
<html>

<head>
        <script>
                let globalId = 1;
                let todoState = [];
                let oldTodoState = [];

                function addTodo() {
                        // big function we wrote in the beginning
                        const todos = document.getElementById("todos");
                        const title = document.getElementById("title").value;
                        const description = document.getElementById("description").value;
                        const newTodo = document.createElement("div");
                        newTodo.append(`Id: ${globalId}`);
                        newTodo.append(document.createElement("br")); // Add a line break
                        newTodo.append(`Title: ${title}`);
                        newTodo.append(document.createElement("br")); // Add a line break
                        newTodo.append(`Description: ${description}`);
                        newTodo.append(document.createElement("br")); // Add a line break
                        const removeBtn = document.createElement("button");
                        removeBtn.innerHTML = "Remove Todo";
                        newTodo.append(removeBtn);
                        todos.appendChild(newTodo);
                        newTodo.setAttribute("id", globalId);
                        removeBtn.setAttribute("onclick", `removeTodo(${globalId})`);
                        todoState.push({
                                title: title,
                                description: description,
                                id: globalId++,
                        })
                        updateState(todoState);
                }

                function removeTodo(todo) {
                        const element = document.getElementById(todo);
                        if (element) {
                                element.parentNode.removeChild(element);
                        }
                }

                function updateTodo(oldTodo, newTodo) {
                        const element = document.getElementById(oldTodo.id);
                        element.children[0].innerHTML = newTodo.title;
                        element.children[1].innerHTML = newTodo.description;
                        element.children[0].innerHTML = newTodo.completed ? "Mark as done" : "Done";
                }

                function updateState(newTodos) {
                        // calculate the diff b/w newTodos and oldTodos.
                        // More specifically, find out what todos are - 
                        // 1. added
                        // 2. deleted
                        // 3. updated
                        const added = [];
                        const deleted = [];
                        const updated = [];
                        // calculate these 3 arrays
                        // call addTodo, removeTodo, updateTodo functions on each of the elements
                        added.push(newTodos);
                        // console.log(`Added Todos`, added);

                        // Check for deleted todos




                        oldTodoState = newTodos;
                }


        </script>
</head>

<body>
        <input type="text" id="title" placeholder="Todo title"></input> <br /><br />
        <input type="text" id="description" placeholder="Todo description"></input> <br /><br />
        <button onclick="addTodo()">Add todo</button>
        <br /> <br />

        <div id="todos">

        </div>
</body>

</html>